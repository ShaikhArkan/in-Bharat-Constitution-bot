<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Bharat Bot</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Roboto&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(180deg, #f4f8fb 0%, #ffffff 100%);
      color: #000;
    }
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1001;
      background: linear-gradient(to right, #ff9933, #ffffff, #138808);
      color: #000;
      padding: 12px 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: 'Merriweather', serif;
      font-size: 22px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .container {
      display: flex;
      flex-direction: column;
      height: 100dvh;
      padding-top: 60px;
    }
    .chatbox {
      flex: 1;
      padding: 12px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: #f8fcff;
    }
    .chat-message {
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 80%;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
    .user-message {
      align-self: flex-end;
      background-color: #1a73e8;
      color: #fff;
      border-top-left-radius: 0;
    }
    .assistant-message {
      align-self: flex-start;
      background-color: #fff;
      border: 1px solid #d9e7f7;
      color: #000;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      border-top-right-radius: 0;
    }
    .assistant-avatar {
      width: 34px;
      height: 34px;
      background: linear-gradient(135deg, #ff9933, #138808);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      font-weight: bold;
      font-size: 14px;
      flex-shrink: 0;
    }
    .typing-indicator {
      font-style: italic;
      opacity: 0.7;
      color: #555;
      font-size: 14px;
      padding-left: 12px;
    }
    .input-area {
      padding: 8px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      background-color: #f5f9fd;
      border-top: 1px solid #d2e3f3;
    }
    .input-area input {
      flex: 1;
      padding: 10px;
      background-color: #fff;
      border: 1px solid #1a73e8;
      border-radius: 20px;
      color: #000;
    }
    .input-area button {
      padding: 10px;
      border: none;
      border-radius: 20px;
      background: linear-gradient(to right, #ff9933, #138808);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
    .footer {
      text-align: center;
      padding: 8px;
      font-size: 14px;
      color: #555;
    }
    .footer a {
      color: #1a73e8;
      text-decoration: none;
      margin: 0 5px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="header">ðŸ‡®ðŸ‡³ Bharat Constitution Bot</div>
  <div class="container">
    <div class="chatbox" id="chatbox"></div>
    <div class="typing-indicator" id="typingIndicator" style="display:none;">India is typing...</div>
    <div class="input-area">
      <input id="chatInput" type="text" placeholder="Ask about Indian Constitution, Fundamental Rights, Articles...">
      <button id="sendButton">âž¤</button>
    </div>
    <div class="footer">
      ðŸ‡®ðŸ‡³ Bharat Constitution Bot can make mistake | Built by <strong>Shaikh Arkan</strong> | Powered by <strong>Yaqoob Khan Pathan</strong>
      <a href="https:www.instagram.com/shaikharkan.7" target="_blank" rel="noopener noreferrer" aria-label="Shaikh Arkan Instagram">
        <i class="fab fa-instagram"></i> Shaikh Arkan
      <a href="https:www.instagram.com/yaqoob_khan_pathan" target="_blank" rel="noopener noreferrer" aria-label="Yaqoob Khan Instagram">
        <i class="fab fa-instagram"></i> Yaqoob Khan Pathan
      </a>
    </div>
  </div>

  <script>
    const chatbox = document.getElementById('chatbox');
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendButton');
    const typingIndicator = document.getElementById('typingIndicator');
    let chatHistory = [];

    async function displayMessage(message, isUser) {
      const msgElem = document.createElement('div');
      msgElem.className = `chat-message ${isUser ? 'user-message' : 'assistant-message'}`;
      if (!isUser) {
        const avatar = document.createElement('div');
        avatar.className = 'assistant-avatar';
        avatar.textContent = 'IN';
        msgElem.appendChild(avatar);
      }
      const text = document.createElement('div');
      if (isUser) {
        text.textContent = message;
        msgElem.appendChild(text);
        chatbox.appendChild(msgElem);
        chatbox.scrollTop = chatbox.scrollHeight;
      } else {
        msgElem.appendChild(text);
        chatbox.appendChild(msgElem);
        chatbox.scrollTop = chatbox.scrollHeight;
        await typeText(text, message);
      }
    }

    function typeText(element, text) {
      return new Promise((resolve) => {
        let i = 0;
        element.textContent = '';
        const speed = 25;
        function type() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            chatbox.scrollTop = chatbox.scrollHeight;
            setTimeout(type, speed);
          } else {
            resolve();
          }
        }
        type();
      });
    }

    async function callApi(prompt) {
      typingIndicator.style.display = 'block';

      const formattedHistory = chatHistory.map(entry => {
        return entry.role === 'user' ? `User: ${entry.text}` : `BharatBot: ${entry.text}`;
      }).join('\n');
      const systemPrompt = `You are ðŸ‡®ðŸ‡³ Bharat Constitution Bot, Build by Shaikh Arkan and Powered by Yaqoob Khan Pathan. 

You answer about The News happen in India or World Wild, Politics, Indian Government, Indian Constitution, Fundamental Rights, Duties, Articles, Rules, Regulations, Amendments, and Indian Political System. 
Explain clearly with references to the Constitution whenever possible.

Conversation history:
${formattedHistory}
User: ${prompt}
BharatBot:`;

      try {
        const response = await fetch('https://backend.buildpicoapps.com/aero/run/llm-api?pk=v1-Z0FBQUFBQm5HUEtMSjJkakVjcF9IQ0M0VFhRQ0FmSnNDSHNYTlJSblE0UXo1Q3RBcjFPcl9YYy1OZUhteDZWekxHdWRLM1M1alNZTkJMWEhNOWd4S1NPSDBTWC12M0U2UGc9PQ==', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: systemPrompt })
        });

        const data = await response.json();
        typingIndicator.style.display = 'none';
        if (data.status === 'success') {
          await displayMessage(data.text, false);
          chatHistory.push({ role: 'assistant', text: data.text });
        } else {
          await displayMessage('Error fetching response.', false);
        }
      } catch (error) {
        typingIndicator.style.display = 'none';
        await displayMessage('API Error: ' + error.message, false);
      }
    }

    sendButton.addEventListener('click', async () => {
      const message = chatInput.value.trim();
      if (!message) return;
      displayMessage(message, true);
      chatHistory.push({ role: 'user', text: message });
      chatInput.value = '';
      await callApi(message);
    });

    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendButton.click();
      }
    });
  </script>
</body>
</html>



